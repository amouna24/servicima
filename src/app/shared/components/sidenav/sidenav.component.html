<button mat-icon-button mat-raised-button color="primary"  (click)="toggleSideNav()" [@buttonAnimation]="sidebarState">
  <mat-icon class="white">{{icontoShow}}</mat-icon>
</button>
<div class="side-nav-container bg-theme" [@onSideNavChange]="sidebarState" fxLayout="column" fxLayoutAlign="start center">
  <mat-nav-list>
    <!---------------------------------------- menu header ------------------------------------------------------------>
    <mat-list-item class="side-nav-header" >
      <p [@nameAnimation]="sidebarState" class="company-label font-size-25">
        <ng-container *ngIf="sidebarState === 'open';else abbrTemplate">
          {{company}}
        </ng-container>
        <ng-template #abbrTemplate>
          {{abbrCompany}}
        </ng-template>
      </p>
    </mat-list-item>
    <!---------------------------------------- menu container ------------------------------------------------------------>
    <div *ngIf="subMenu.length === 0; else subMenuContainer">
      <ng-container *ngFor=" let menuItem of menu">
        <ng-container *ngIf=" menuItem.type === 'link';  else subMenuLabel">
          <a  mat-list-item routerLinkActive="active-list-item" [routerLink]="['/', moduleName, menuItem.state]"
             class="list-item" [@iconAnimation]="sidebarState">
            <mat-icon class="icon material-icons-outlined" [@iconAnimation]="sidebarState">{{menuItem.icon}}
            </mat-icon>
            <span class="font-light font-size-14" [@labelAnimation]="sidebarState">{{menuItem.name | translate }}</span>
          </a>
        </ng-container>
        <ng-template #subMenuLabel>
          <mat-list-item (click)="toggleSubMenu(menuItem.children, menuItem.state)" class="list-item"
                         [@iconAnimation]="sidebarState">
            <mat-icon class="icon material-icons-outlined">{{menuItem.icon}}
            </mat-icon>
            <span class="font-light font-size-14" [@labelAnimation]="sidebarState">{{menuItem.name }}</span>
          </mat-list-item>
        </ng-template>
      </ng-container>
    </div>
    <!---------------------------------------- sub menu container ------------------------------------------------------------>
    <ng-template #subMenuContainer>
      <div class="mat-list-item-content">
        <mat-list-item class="list-item" [@iconAnimation]="sidebarState" (click)="closeSubMenu()">
          <mat-icon class="icon material-icons-outlined" >arrow_back
          </mat-icon>
          <span class="font-light font-size-14" [@labelAnimation]="sidebarState">go back</span>
        </mat-list-item>
        <mat-accordion multi="false">
        <ng-container *ngFor=" let subMenuItem of subMenu">
          <ng-container *ngIf=" subMenuItem.type === 'link'; else accordion">
            <a mat-list-item routerLinkActive="active-list-item"
               [routerLink]="subMenuItem.state === '' ? ['/', moduleName, parentMenu] : ['/', moduleName, parentMenu, subMenuItem.state]"
               [routerLinkActiveOptions]="{exact: true}" class="list-item" [@iconAnimation]="sidebarState">
              <mat-icon class="icon material-icons-outlined" >
                {{subMenuItem.icon}}
              </mat-icon>
              <span class="font-light font-size-14" [@labelAnimation]="sidebarState">{{subMenuItem.name }}</span>
            </a>
          </ng-container>
              <ng-template #accordion>
              <mat-expansion-panel [@accordionAnimation]="sidebarState" #widExp (click)="toggleAccordion(widExp)"  hideToggle>
                <mat-expansion-panel-header  [ngClass]="widExp.expanded?'active-list-item':'list-item'" class="list-item"  [@iconAnimation]="sidebarState">
                  <mat-panel-title >
                    <mat-icon class="icon material-icons-outlined" >
                      {{subMenuItem.icon}}
                    </mat-icon>
                    <span class="font-light font-size-14" [@labelAnimation]="sidebarState">{{subMenuItem.name }}</span>
                  </mat-panel-title>
                </mat-expansion-panel-header>
                <a  mat-list-item routerLinkActive="active-sub-menu-child-item" *ngFor="let subChildMenu of subMenuItem.child"
                   [routerLink]="['/', moduleName, parentMenu, subMenuItem.state, subChildMenu.state]"
                   class="font-light font-size-14 sub-menu-child-item " [@labelAnimation]="sidebarState">
                    {{subChildMenu.name }}
                </a>
              </mat-expansion-panel>
              </ng-template>

        </ng-container>
        </mat-accordion>
      </div>
    </ng-template>
  </mat-nav-list>
  <!---------------------------------------- footer ------------------------------------------------------------>
  <span class="flex-spacer"></span>
  <span class="servicima-logo" fxLayout="row">
      <ng-container *ngIf="iconBool; else miniLogo" [@labelAnimation]="sidebarState">
        <div fxLayoutAlign="center center" fxLayoutGap="10px">
           <img src="assets/img/logoServicima.png" alt="servicima" fxFlex="14.5">
           <img src={{this.image}} alt="servicima" fxFlex="51">
        </div>
      </ng-container>
      <ng-template #miniLogo>
         <img src="assets/img/logoServicima.png" alt="servicima" fxFlexAlign="center center" fxFlex="80">
      </ng-template>

    </span>

  <p [@labelAnimation]="sidebarState" class="font-light font-size-9 text-center servicima-color">{{this.year}} Â©
    Servicima All rights reserved.</p>
</div>
