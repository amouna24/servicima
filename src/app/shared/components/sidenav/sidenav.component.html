<button mat-icon-button (click)="toggleSideNav()" [@buttonAnimation]="sidebarState">
  <mat-icon>{{icontoShow}}</mat-icon>
</button>
<div class="side-nav-container" [@onSideNavChange]="sidebarState">
  <mat-nav-list>
    <!---------------------------------------- menu header ------------------------------------------------------------>
    <mat-list-item class="side-nav-header" [@nameAnimation]="sidebarState">
      <div class="col" style="margin-left: 5px">
        <div class="company-label"> {{company}}</div>
      </div>
    </mat-list-item>
    <!---------------------------------------- menu container ------------------------------------------------------------>
    <div *ngIf="subMenu.length === 0; else subMenuContainer">
      <ng-container *ngFor=" let menuItem of menu">
        <ng-container *ngIf=" menuItem.type === 'link';  else subMenuLabel">
          <a mat-list-item routerLinkActive="active-list-item" [routerLink]="['./', menuItem.state]" class="list-item">
            <mat-icon class="icon material-icons-outlined" [@iconAnimation]="sidebarState">{{menuItem.icon}}
            </mat-icon>
            <span [@labelAnimation]="sidebarState">{{menuItem.name | translate }}</span>
          </a>
        </ng-container>
        <ng-template #subMenuLabel>
          <mat-list-item class="list-item" (click)="toggleSubMenu(menuItem.children, menuItem.state)">
            <mat-icon class="icon material-icons-outlined" [@iconAnimation]="sidebarState">{{menuItem.icon}}
            </mat-icon>
            <span [@labelAnimation]="sidebarState">{{menuItem.name }}</span>
          </mat-list-item>
        </ng-template>
      </ng-container>
    </div>
    <!---------------------------------------- sub menu container ------------------------------------------------------------>
    <ng-template #subMenuContainer>
      <div class="sub-menu">
        <mat-list-item class="list-item back-button" (click)="closeSubMenu()">
          <mat-icon class="icon material-icons-outlined" [@iconAnimation]="sidebarState">arrow_back
          </mat-icon>
          <span [@labelAnimation]="sidebarState">go back</span>
        </mat-list-item>
        <ng-container *ngFor=" let subMenuItem of subMenu">
                  <a *ngIf=" subMenuItem.type === 'link'" mat-list-item routerLinkActive="active-list-item" [routerLink]="subMenuItem.state === '' ? ['./' ,parentMenu] : ['./' ,parentMenu, subMenuItem.state]" [routerLinkActiveOptions]="{exact: true}" class="list-item">
                    <mat-icon class="icon material-icons-outlined" [@iconAnimation]="sidebarState">
                      {{subMenuItem.icon}}
                    </mat-icon>
                    <span [@labelAnimation]="sidebarState">{{subMenuItem.name }}</span>
                  </a>
                  <mat-accordion *ngIf=" subMenuItem.type === 'sub'">
                    <mat-expansion-panel #widExp hideToggle>
                      <mat-expansion-panel-header fxFlexAlign="auto" fxFlexAlign.xs="auto" fxLayout="row" fxLayout.xs="row" class="list-item" >
                        <mat-panel-title  fxFlex="95">
                          <mat-icon class="icon material-icons-outlined" [@iconAnimation]="sidebarState">
                            {{subMenuItem.icon}}
                          </mat-icon>
                          <span [@labelAnimation]="sidebarState">{{subMenuItem.name }}</span>
                        </mat-panel-title>
                        <mat-panel-description fxFlex="5">
                          <mat-icon class="icon material-icons-outlined" *ngIf="!widExp.expanded">expand_more</mat-icon>
                          <mat-icon class="icon material-icons-outlined" *ngIf="widExp.expanded">expand_less</mat-icon>
                        </mat-panel-description>
                      </mat-expansion-panel-header>
                      <a mat-list-item routerLinkActive="active-list-item" *ngFor="let subChildMenu of subMenuItem.child" [routerLink]="['./',parentMenu, subMenuItem.state, subChildMenu.state]" class="list-item">
                        <mat-icon class="icon material-icons-outlined">{{subChildMenu.icon}}
                        </mat-icon>
                        <span [@labelAnimation]="sidebarState" class="wid-acc-title">{{subChildMenu.name }}</span>
                      </a>
                    </mat-expansion-panel>
                  </mat-accordion>
        </ng-container>
      </div>
    </ng-template>
  </mat-nav-list>
  <!---------------------------------------- footer ------------------------------------------------------------>
  <span class="flex-spacer"></span>
  <div *ngIf='iconBool'>
    <mat-list-item class="side-nav-header" [@nameAnimation]="sidebarState">
        <img src="assets/img/servicima.png"  class="company-name">
    </mat-list-item>
    <div class="logo" fxLayoutAlign="center center">
      <img src='assets/img/logoServicima.png'>
    </div>
    <div class="footer">2020 Â© Servicima All rights reserved.</div>
  </div>
</div>
